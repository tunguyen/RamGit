
$(function(){$("div.bt-ad-placement-iframe[id*=marriott-US-search]").not("[id*=marriott-US-search-left-rail]").adaraSearch();$("div.bt-ad-placement-iframe[id*=marriott-US-search-left-rail]").adaraGuidedNav();if(typeof updateCrossLinkBoxesFromMerchSearchResults!='undefined'&&updateCrossLinkBoxesFromMerchSearchResults==true){updateCrossLinkBoxesFromMerchSearchResults=false;MI.hotelDirectory=MI.hotelDirectory||{}
MI.hotelDirectory=new HotelDirectory();MI.hotelDirectory.disableCrossLinkToggleBoxes();MI.hotelDirectory.deleteEmptyCrossLinkBoxes();}else if(typeof runDirectoryDocumentReady!='undefined'&&runDirectoryDocumentReady==true){runDirectoryDocumentReady=false;MI.hotelDirectory=MI.hotelDirectory||{}
MI.hotelDirectory=new HotelDirectory();MI.hotelDirectory.doDirectoryDocumentReady();setTimeout("MI.hotelDirectory.loadCountriesForRegion( selectedRegion );",1000);}});function HotelDirectory(){var self=this;var initialized=false;self.consolable=false;self.minCountryListDisplayHeight=120;self.coordinates=new Array();var coordinate={};function initializeCoordinates(){coordinate.x=-900;coordinate.y=-100;coordinate.w=2500;coordinate.h=240;self.coordinates["AFRC"]=coordinate;coordinate={};coordinate.x=-400;coordinate.y=-50;coordinate.w=1100;coordinate.h=300;self.coordinates["ASIA"]=coordinate;coordinate={};coordinate.x=-900;coordinate.y=-350;coordinate.w=1500;coordinate.h=500;self.coordinates["AUSP"]=coordinate;coordinate={};coordinate.x=-4;coordinate.y=-80;coordinate.w=2400;coordinate.h=750;self.coordinates["CNDA"]=coordinate;coordinate={};coordinate.x=-1250;coordinate.y=-450;coordinate.w=6000;coordinate.h=1000;self.coordinates["CRBN"]=coordinate;coordinate={};coordinate.x=-1000;coordinate.y=-450;coordinate.w=6000;coordinate.h=1000;self.coordinates["CAMR"]=coordinate;coordinate={};coordinate.x=-800;coordinate.y=-90;coordinate.w=2400;coordinate.h=480;self.coordinates["EURP"]=coordinate;coordinate={};coordinate.x=-4;coordinate.y=-200;coordinate.w=2400;coordinate.h=500;self.coordinates["MXCO"]=coordinate;coordinate={};coordinate.x=-1000;coordinate.y=-100;coordinate.w=2400;coordinate.h=360;self.coordinates["MDES"]=coordinate;coordinate={};coordinate.x=-200;coordinate.y=-120;coordinate.w=2500;coordinate.h=240;self.coordinates["SAMR"]=coordinate;coordinate={};coordinate.x=0;coordinate.y=-100;coordinate.w=2400;coordinate.h=700;self.coordinates["USTS"]=coordinate;initialized=true;}
function moveImage(x,y,w,h){$("#world-map").animate({left:0,top:0,width:920,height:270},250,function(){$("#world-map").animate({left:x,top:y,width:w,height:h},500);});}
return{isConsolable:function(){return self.consolable;},disableCrossLinkToggleBoxes:function(){var selector=".column > .grouped > h3 > a.toggle-link";$(selector).bind('mouseenter',function(){$(this).attr("href","#0P3N");$(this).unbind();}).bind('focus',function(){$(this).attr("href","#0P3N");$(this).unbind();});},deleteEmptyCrossLinkBoxes:function(){if(self.consolable)console.log("deleteEmptyCrossLinkBoxes() called...");$(".four-column-with-zone-title .four-column .column").each(function(){if($(this).children().length==0){if(self.consolable)console.log("Deleting empty cross links box");$(this).remove();}});},doDirectoryDocumentReady:function(){if(!initialized){initializeCoordinates();}
$("#guided-nav-horizontal li a").click(function(event){if(self.consolable){console.log("link ["+$(this).attr("href")+"]");console.log("selectedRegion ["+$("#selectedRegion").text().length+"]");}
if($(this).attr("href").indexOf("selectedRegion")==-1&&$("#selectedRegion").text().length==4){var regionUrl=$(this).attr("href")+"?selectedRegion="+$("#selectedRegion").text();$(this).attr("href",regionUrl)}});$("a.region-url").click(function(event){var alreadySelected=$(this).hasClass("region-selected");var isDisabled=$(this).hasClass("region-disabled");if(!alreadySelected&&!isDisabled){var region=this.href.split('#')[1];MI.hotelDirectory.loadCountriesForRegion(region);}
event.preventDefault();});minCountryListDisplayHeight=$("#countries-list-display").css("min-height");$("#world-map").animate({left:0,top:0,width:920,height:270},20,function(){});},loadCountriesForRegion:function(region){if(region=="MXCO"||region=="CNDA"){var pageLink=$("#adhoc-region-link-"+region).text();if(self.consolable){console.log("Rerouting region display request for ["+region+"]...");console.log("Sending user to pageLink ["+pageLink+"]");}
document.location=pageLink;return;}
$(".region-selected").removeClass("region-selected");$("#region-url-"+region).addClass("region-selected");$("#region-url-"+region).parent().addClass("region-selected");$("#selectedRegion").text(region);$('#world-map-wrapper').fadeTo(250,0.3);$("#countries-list-display").fadeOut(250,function(){$("#countries-list-display").empty();$("#"+region).clone().appendTo("#countries-list-display");if($("#countries-list-display li").length==1){$("#countries-list-display li").hide();}
var currentCountryListHeight=$("#countries-list-display").outerHeight();var currentBackgroundHeight=$("#countries-list-background").outerHeight();moveImage(self.coordinates[region].x,self.coordinates[region].y,self.coordinates[region].w,self.coordinates[region].h);$("#countries-list-background").animate({height:currentCountryListHeight},400);$("#world-map-wrapper").animate({height:currentCountryListHeight},400,function(){$("#world-map-wrapper").fadeTo(400,1.0);$("#countries-list-display").fadeIn(1000);});});}}}
var MI=MI||{};MI.search=MI.search||{};MI.search.compareHotels={checkProp:function(obj){var compareButton=obj.siblings('.compare-button-container');if(obj.prop('checked')){compareButton.show();}else{compareButton.hide();}},checkCount:function(){var buttonsChecked=$('.compare-checkbox:checked');var buttonsNotChecked=$('.compare-checkbox').not(':checked');var limit=$('#merch-property-results').data('compare-limit');if(buttonsChecked.length>=limit){buttonsNotChecked.prop('disabled',true);}else{buttonsNotChecked.prop('disabled',false);}}};MI.search.tracking={tracking:false,readMoreTrack:false,toggleView:function(view){if(this.tracking){var obj=$('#view-controls');var s=s_gi(s_account);s.linkTrackEvents='';s.linkTrackVars='eVar14';s.eVar14='View='+view;void(s.tl(obj,'o','Search Results Toggle View'));}},sortView:function(sort){if(this.tracking){var obj=$('#sortHD');var s=s_gi(s_account);s.linkTrackEvents='';s.linkTrackVars='eVar14';s.eVar14='SearchResultsRefinement:Sort='+sort;void(s.tl(obj,'o','Search Results Sort View'));}},refineSearch:function(refinement,obj){var s=s_gi(s_account);s.linkTrackEvents='';s.linkTrackVars='eVar14';s.eVar14='SearchResultsRefinement:Dimension='+refinement;void(s.tl(obj,'o','Search Results Refinement Dimension'));},readMore:function(obj){if(!this.readMoreTrack){var s=s_gi(s_account);s.linkTrackVars='prop29,events';s.prop29='MiniStores:Read More';void(s.tl(obj,'o','MiniStore Read More Link'));this.readMoreTrack=true;}}};MI.search.toggleView={defaultMapSize:'0',largeMapSize:'566px',largeContainerSize:'568px',isGroupSearch:$('#view-controls').data('groupsearch'),toggleAction:function(view){var expandControls=$('#expand-map'),map=$('#map'),mapContainer=$('#search-map-container'),isGroupSearch=this.isGroupSearch,largeMapSize=this.largeMapSize,largeContainerSize=this.largeContainerSize,defaultMapSize=this.defaultMapSize;switch(view){case'mapView':if(isGroupSearch){expandControls.hide();}else{map.addClass("show");mapContainer.addClass("full-map");mapContainer.css('height','');var pageLang=$('html').attr('lang');var searchedCountry=$('#edit-search-form select.search-country').find(':selected').val();if(pageLang=='zh-CN'&&searchedCountry=='CN'&&typeof propertySearchMap!='undefined'){propertySearchMap.toggleMap(view);}else if(typeof propertySearchBingMap!='undefined'){propertySearchBingMap.toggleMap(view);}}
map.css('height',largeMapSize);break;case'listView':if(isGroupSearch){expandControls.show();}else{mapContainer.removeClass("full-map");mapContainer.css('height',defaultMapSize);map.removeClass("show");}
map.css('height',defaultMapSize);break;case'galleryView':if(isGroupSearch){expandControls.show();}else{mapContainer.removeClass("full-map");mapContainer.css('height',defaultMapSize);map.removeClass("show");}
map.css('height',defaultMapSize);break;}},setDefaultMap:function(){var map=$('#map'),mapContainer=$('#search-map-container'),currentView=$('#view-controls').data('currentview'),isGroupSearch=this.isGroupSearch,largeMapSize=this.largeMapSize,largeContainerSize=this.largeContainerSize;if(map.length>0){if(isGroupSearch){this.defaultMapSize=map.css('height');map.addClass("show");}else if(currentView=="mapView"){map.css('height',largeMapSize);map.addClass("show");mapContainer.addClass("full-map");}else{map.add(mapContainer).css('height','0');}}}};$(document).ready(function(){$('#qv-tabs').tabs();});$(document).ready(function(){MI.search.toggleView.setDefaultMap();$('#gallery-toggle,#list-toggle,#map-toggle').click(function(e){e.preventDefault();var viewSelection=$(this).data('view'),container=$('#merch-property-results');$('#view-controls li').removeClass('active');$(this).parent().addClass('active');var toggleView=function(){switch(viewSelection){case'map':MI.search.toggleView.toggleAction('mapView');container.addClass('list');container.removeClass('gallery');SearchResultsViewTypeRemoteService.setViewType('mapView');MI.search.tracking.toggleView('Map');break;case'list':MI.search.toggleView.toggleAction('listView');container.addClass('list');container.removeClass('gallery');SearchResultsViewTypeRemoteService.setViewType('listView');MI.search.tracking.toggleView('List');break;case'gallery':MI.search.toggleView.toggleAction('galleryView');container.addClass('gallery');container.removeClass('list');SearchResultsViewTypeRemoteService.setViewType('galleryView');MI.search.tracking.toggleView('Gallery');break;default:container.removeClass('list');container.addClass('gallery');}};container.fadeOut(300,function(){toggleView();$(this).fadeIn(300);});var sgoSearchResults=$('.sgo-search-results');if(viewSelection=='gallery'){if(sgoSearchResults.length>0){$('#merch-property-results .property-row').each(function(){equalHeight($('.sgo-search-results .price-display-container',this));})}}else{if(sgoSearchResults.length>0){$('.sgo-search-results .price-display-container').css("height","auto");}}});$('h3.hotel-title, .photo-panel a,a.view-rate-btn').hover(function(){var brandImage=$(this).parents('.merch-property-records').find('.logo-holder p');brandImage.addClass('hover');},function(){var brandImage=$(this).parents('.merch-property-records').find('.logo-holder p');brandImage.removeClass('hover');});$('.explore-brands-horizontal a').hover(function(){$(this).parent().addClass('hover');},function(){$(this).parent().removeClass('hover');});if($('#selected-dimensions').length>0){$(".dimension-remove-icon").click(function(){window.location=$(this).prev().attr('href');});}
if($('#hotel-directory').length>0){$('#hotel-directory li a').hover(function(){$(this).parent().css('background-color','#eaeaea');},function(){$(this).parent().css('background-color','#fff');});}
var heroCarousel2=$('#hero-carousel-2');var numImgs=$('.caroufredsel_wrapper img').length;if(heroCarousel2.length>0){var playText=$("div#hero-carousel-2").data('options').play;var pauseText=$("div#hero-carousel-2").data('options').pause;var carouselControls1=$('<a href="#" title="carousel-left-arrow" class="icon-arrow-left"/><a href="#" title="carousel-right-arrow" class="icon-arrow-right"/>');var carouselControls=$('<div class="carousel-controls"/>').css({position:'absolute',zIndex:'101',bottom:'10px'}).append($('<div class="carousel-pagination" id ="paging" />'))
var carouselControls2=$('<div class="carousel-controls2"/><div class="test3"').css({position:'absolute',zIndex:'101'}).append('<a href="play-pause" class="icon-pause"><span class="is-hidden-text">'+pauseText+'</span></a>');heroCarousel2.css('position','relative').append(carouselControls2);heroCarousel2.append(carouselControls1);heroCarousel2.css('position','relative').append(carouselControls);heroCarousel2.find('ul').carouFredSel({items:{visible:1},onCreate:function(){var carHeight=$('#hero-carousel-2').height();var alignArrows=carHeight/2
var carouselWidth=$('.caroufredsel_wrapper').width();$('.firstCarouselImage').remove();$('#hero-carousel-2').css({'position':'relative','padding-bottom':'38px','left':'auto'});$('.icon-arrow-left, .icon-arrow-right').css('top',alignArrows);heroCarousel2.css('width',carouselWidth);},pagination:"#paging",keys:'true',prev:'#prebtn',next:'#nextbtn',next:{button:'.icon-arrow-right',key:'right'},prev:{button:'.icon-arrow-left',key:'left'},auto:{button:'.icon-pause',duration:1000,timeoutDuration:5000,pauseOnEvent:true},scroll:{onAfter:function(){var count=$(".caroufredsel_wrapper img").length;numImgs++;if(count<=3){if(numImgs==count*2){$('.caroufredsel_wrapper img').trigger("pause");}
else{$('ul img').trigger("play");}}}}}).trigger('play');var carouselControls=$('.carousel-controls');carouselControls.css('left',carouselControls.parent().width()/2-carouselControls.width()/2);}
$("#hero-carousel-2").on('click','.icon-pause',function(){$(this).toggleClass("pause icon-play");var a=$(".icon-pause > .is-hidden-text").text();if(a==pauseText){$(".icon-pause > .is-hidden-text").text(playText);}
else if(a==playText){$(".icon-pause > .is-hidden-text").text(pauseText);}});var totalImages=$(".caroufredsel_wrapper ul li").length;var imgAlt=[];for(i=0;i<totalImages;i++)
{imgAlt[i]=$(".caroufredsel_wrapper ul li").eq(i).children("img").attr("alt");}
var totalDots=$("#paging a").length;for(i=0;i<totalDots;i++)
{$("#paging a").eq(i).prop("title",imgAlt[i]);}
var comparecheckBox=$('.compare-checkbox');if(comparecheckBox.length>0){MI.search.compareHotels.checkCount();comparecheckBox.each(function(){MI.search.compareHotels.checkProp($(this));}).change(function(){MI.search.compareHotels.checkCount();MI.search.compareHotels.checkProp($(this));});}
if($('input[id=omniSiteTrackingOn]').val()=="true"){MI.search.tracking.tracking=true;var dimensions=$(':hidden[name=selectedDimensions]').val();$('#countries-list-display').undelegate('ul li a','click');$('#countries-list-display').delegate('ul li a','click',function(){if($(this).parents('div').prop('id')=='USTS'){var s=s_gi(s_account);s.linkTrackEvents='';s.linkTrackVars='eVar14';s.eVar14="HotelDirectory:Dimension=State";void(s.tl(this,'o','Hotel Directory Landing Page'));}else{var s=s_gi(s_account);s.linkTrackEvents='';s.linkTrackVars='eVar14';s.eVar14="HotelDirectory:Dimension=Country";void(s.tl(this,'o','Hotel Directory Landing Page'));}});$('#sortHD,#availability-filter,#currency').change(function(){MI.search.tracking.sortView($(this).val());});$('#guided-nav-items').find('a').click(function(){var refinement=$(this).prop('id');MI.search.tracking.refineSearch(refinement);});}
$('.mi-quickview').click(function(e){e.preventDefault();var dataMarsha=$(this).data('marsha');var sizeW=835;var sizeH=740;var photoView='';if(dataMarsha!=''&&typeof(dataMarsha)!='undefined')
{if($(this).children('img').length>0&&$(this).children('#recentphotoimg').length>0)
{photoView='&view=photo&pageHQVType=recent';}else if($(this).children('img').length>0){photoView='&view=photo';}else if($(this).hasClass('recent-view')){photoView='&pageHQVType=recent';}
var $iframe=$('<iframe/>',{src:'/hotels/quickView.mi?marshaCode='+dataMarsha+photoView,className:'quickview-container',scrolling:'no',width:820,height:740});$('#res-modal-box').miLightboxes({content:$iframe,sizeWidth:sizeW,sizeHeight:sizeH,headerFormat:1,lightBoxClass:'hqvLightbox',resizable:false});$('.hqvLightbox').css('background','url('+imgPath+'/Images/CSS_Backgrounds/loading2.gif) center center no-repeat');$('.ui-icon-closethick').hide();}});});function equalHeight(group){var tallest=0;group.each(function(){var thisHeight=$(this).height();if(thisHeight>tallest){tallest=thisHeight;}});group.height(tallest);}